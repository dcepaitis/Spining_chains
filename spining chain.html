<!DOCTYPE html>

<html>

<head>
<APM_DO_NOT_TOUCH>

<script type="text/javascript">
(function(){
window.uAR=!!window.uAR;try{(function(){(function(){})();var b=75;try{var aa,ca,oa=c(765)?0:1,sa=c(689)?0:1,ta=c(614)?0:1,ua=c(550)?0:1,va=c(240)?0:1;for(var Aa=(c(499),0);Aa<ca;++Aa)oa+=(c(770),2),sa+=(c(783),2),ta+=c(814)?1:2,ua+=(c(84),2),va+=c(241)?2:3;aa=oa+sa+ta+ua+va;window.Pa===aa&&(window.Pa=++aa)}catch(a){window.Pa=aa}var e=!0;function f(a,d){a+=d;return a.toString(36)}
function Ba(a){var d=64;a&&(document[q(d,182,169,179,169,162,169,172,169,180,185,147,180,161,180,165)]&&document[q(d,182,169,179,169,162,169,172,169,180,185,147,180,161,180,165)]!==f(68616527602,d)||(e=!1));return e}function q(a){var d=arguments.length,g=[];for(var h=1;h<d;++h)g.push(arguments[h]-a);return String.fromCharCode.apply(String,g)}function t(a){var d=arguments.length,g=[];for(var h=1;h<d;h++)g[h-1]=arguments[h]-a;return String.fromCharCode.apply(String,g)}function Da(){}
Ba(window[Da[f(1086779,b)]]===Da);Ba(typeof ie9rgb4!==q(b,177,192,185,174,191,180,186,185));Ba(RegExp("\x3c")[f(1372130,b)](function(){return"\x3c"})&!RegExp(t(b,195,126,175))[t(b,191,176,190,191)](function(){return"'x3'+'d';"}));
var Fa=window[q(b,172,191,191,172,174,179,144,193,176,185,191)]||RegExp(t(b,184,186,173,180,199,172,185,175,189,186,180,175),q(b,180))[f(1372130,b)](window["\x6e\x61vi\x67a\x74\x6f\x72"]["\x75\x73e\x72A\x67\x65\x6et"]),Ha=+new Date+(c(452)?507983:6E5),Ia,Ja,La,Na=window[q(b,190,176,191,159,180,184,176,186,192,191)],Oa=Fa?c(842)?36343:3E4:c(443)?5990:6E3;
document[q(b,172,175,175,144,193,176,185,191,151,180,190,191,176,185,176,189)]&&document[q(b,172,175,175,144,193,176,185,191,151,180,190,191,176,185,176,189)](t(b,193,180,190,180,173,180,183,180,191,196,174,179,172,185,178,176),function(a){var d=65;document[q(d,183,170,180,170,163,170,173,170,181,186,148,181,162,181,166)]&&(document[t(d,183,170,180,170,163,170,173,170,181,186,148,181,162,181,166)]===f(1058781918,d)&&a[t(d,170,180,149,179,182,180,181,166,165)]?La=!0:document[t(d,183,170,180,170,163,
170,173,170,181,186,148,181,162,181,166)]===f(68616527601,d)&&(Ia=+new Date,La=!1,z()))});function z(){if(!document[t(83,196,200,184,197,204,166,184,191,184,182,199,194,197)])return!0;var a=+new Date;if(a>Ha&&(c(908)?585298:6E5)>a-Ia)return Ba(!1);var d=Ba(Ja&&!La&&Ia+Oa<a);Ia=a;Ja||(Ja=!0,Na(function(){Ja=!1},c(615)?0:1));return d}z();var Qa=[c(316)?14106009:17795081,c(658)?2147483647:27611931586,c(105)?1558153217:1132739777];
function Ra(a){var d=46;a=typeof a===f(1743045630,d)?a:a[t(d,162,157,129,162,160,151,156,149)](c(175)?26:36);var g=window[a];if(!g||!g[q(d,162,157,129,162,160,151,156,149)])return;var h=""+g;window[a]=function(k,l){Ja=!1;return g(k,l)};window[a][t(d,162,157,129,162,160,151,156,149)]=function(){return h}}for(var Ta=(c(589),0);Ta<Qa[q(b,183,176,185,178,191,179)];++Ta)Ra(Qa[Ta]);Ba(!1!==window[q(b,192,140,157)]);window.Ea=window.Ea||{};window.Ea.Ub="0801d92981194000f5730d57e6531eb9e7946227836ed329c1dc2ca4d160572986ed68907b487e1f3d650171927e48ee6ea730785ab3d550e09a6b4c43b5e74169126a1899b3eb87";
function B(a){var d=+new Date;if(!document[t(79,192,196,180,193,200,162,180,187,180,178,195,190,193,144,187,187)]||d>Ha&&(c(143)?572650:6E5)>d-Ia)var g=Ba(!1);else g=Ba(Ja&&!La&&Ia+Oa<d),Ia=d,Ja||(Ja=!0,Na(function(){Ja=!1},c(381)?0:1));return!(arguments[a]^g)}function c(a){return 117>a}(function Ua(a){return a?0:Ua(a)*Ua(a)})(!0);})();}catch(x){}finally{ie9rgb4=void(0);};function ie9rgb4(a,b){return a>>b>>0};

})();

</script>
</APM_DO_NOT_TOUCH>

<script type="text/javascript" src="/TSPD/08d254ae74ab2000e5a1b7772da930aa4a26efb03652b05937f7c7ea8aa067280f350d80ef13c126?type=9"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
</head>

<body>
    <canvas id="myCanvas" width="480" height="300"></canvas>
    <script>
        // Setup

        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        ctx.imageSmoothingEnabled = true;

        // Functions

        function drawGear(x, y, r1, r2, r3, n, offsetDeg) {
            var nth = Math.PI / n;
            var smooth = nth / 5;

            ctx.strokeStyle = "black";
            ctx.lineWidth = 2;
            ctx.beginPath();

            for (i = 0; i < n; i++) {
                // Innside
                ctx.arc(
                    x,
                    y,
                    r1,
                    offsetDeg + nth * (i * 2) + smooth,
                    offsetDeg + nth * (i * 2 + 1) - smooth,
                    false
                );

                // Outside
                ctx.arc(
                    x,
                    y,
                    r2,
                    offsetDeg + nth * (i * 2 + 1) + smooth,
                    offsetDeg + nth * (i * 2 + 2) - smooth,
                    false
                );
            }

            ctx.closePath();

            ctx.arc(x, y, r3, 0, Math.PI * 2, true);
            ctx.fill();
        }

        function drawOffsetGear(gear, offset) {
            drawGear(gear.x, gear.y, gear.r1, gear.r2, gear.r3, gear.n, offset);
        }

        function drawBorder(x, y, w, h) {
            ctx.beginPath();
            ctx.rect(x, y, w, h);
            ctx.closePath();
            ctx.stroke();
        }

        function clear() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function getPointOnChain(gear1, gear2, offset) {
            var gear1top = { x: gear1.x, y: gear1.y - gear1.r };
            var gear2top = { x: gear2.x, y: gear2.y - gear2.r };

            var gear1bot = { x: gear1.x, y: gear1.y + gear1.r };
            var gear2bot = { x: gear2.x, y: gear2.y + gear2.r };

            var line1len = Math.sqrt(
                Math.pow(gear1top.x - gear2top.x, 2) +
                Math.pow(gear1top.y - gear2top.y, 2)
            );
            var line2len = line1len;

            var gear1len = gear1.c / 2;
            var gear2len = gear2.c / 2;



            var totalLen = line1len + line2len + gear1len + gear2len;
            pos = offset % totalLen;

            if (pos < line1len) {
                return getPointOnLine(
                    gear1top.x,
                    gear1top.y,
                    gear2top.x,
                    gear2top.y,
                    pos / line1len
                );
            } else if (pos < line1len + gear2len) {
                return getPointOnCircle(
                    gear2.x,
                    gear2.y,
                    gear2.r,
                    ((pos - line1len) / gear2len) * Math.PI - Math.PI / 2
                );
            } else if (pos < line1len + gear2len + line2len) {
                return getPointOnLine(
                    gear2bot.x,
                    gear2bot.y,
                    gear1bot.x,
                    gear1bot.y,
                    (pos - line1len - gear2len) / line2len
                );
            } else {
                return getPointOnCircle(
                    gear1.x,
                    gear1.y,
                    gear1.r,
                    ((pos - line1len - gear2len - line2len) / gear1len) * Math.PI +
                    Math.PI / 2
                );
            }
        }

        function drawPoint(point, r, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(point.x, point.y, r, 0, Math.PI * 2);
            ctx.closePath();
            ctx.fill();
        }

        function getPointOnLine(x, y, x_, y_, t) {
            function lerp(p1, p2, t) {
                return p1 * (1 - t) + p2 * t;
            }

            return { x: lerp(x, x_, t), y: lerp(y, y_, t) };
        }

        function getPointOnCircle(x, y, r, rad) {
            return { x: x + Math.cos(rad) * r, y: y + Math.sin(rad) * r };
        }

        function drawLine(point1, point2, width, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = width;
            ctx.beginPath();
            ctx.moveTo(point1.x, point1.y);
            ctx.lineTo(point2.x, point2.y);
            ctx.stroke();
        }

        // Main

        // vars
        var fps = 60;
        var ups = 60; // speed
        var k = 15;

        var first_gear = {
            x: 75,
            y: 150,
            r1: 32,
            r2: 40,
            r3: 7,
            n: 12,
        };
        first_gear.r = (first_gear.r1 + first_gear.r2) / 2;
        first_gear.c = 2 * Math.PI * first_gear.r;
        dist = first_gear.c / first_gear.n;

        var second_gear = {
            y: 150,
            r1: 56,
            r2: 64,
            r3: 7,
            n: 20,
        };
        second_gear.r = (second_gear.r1 + second_gear.r2) / 2;
        second_gear.c = second_gear.r * 2 * Math.PI;
        second_gear.x =
            first_gear.x +
            Math.sqrt(
                Math.pow(k, 2) * Math.pow(dist, 2) -
                Math.pow(second_gear.r - first_gear.r, 2)
            );

        var speed = ups / fps;
        var total = 0;

        setInterval(() => {
            clear();

            // Border options
            ctx.strokeStyle = "black";
            ctx.lineWidth = 2;
            drawBorder(0, 0, canvas.width, canvas.height);

            //  Gears
            ctx.fillStyle = "rgb(75, 75, 75, 1)";
            total += speed;

            rot = (total / first_gear.c) * Math.PI * 2;
            drawOffsetGear(first_gear, rot - Math.PI / first_gear.n / 2);

            rot_ = (total / second_gear.c) * Math.PI * 2;
            drawOffsetGear(second_gear, rot_ - Math.PI / second_gear.n / 2);

            // Chain
            total_points = first_gear.n / 2 + second_gear.n / 2 + k * 2;

            points = [];
            for (i = 0; i < total_points; i++) {
                var point = getPointOnChain(
                    first_gear,
                    second_gear,
                    total + dist * i
                );
                points.push(point);
            }

            // 1, draw all connections
            for (i = 0; i < total_points; i++) {
                var point1 = points[i];
                var point2 = points[(i + 1) % total_points];

                if (i % 2 == 0) {
                    var chainWidth = 6;
                    var chainColor = "black";
                } else {
                    var chainWidth = 4;
                    var chainColor = "grey";
                }

                drawLine(point1, point2, chainWidth, chainColor);
            }

            // 2, draw all points
            for (i = 0; i < total_points; i++) {
                var point = points[i];
                drawPoint(point, 5, "black");
                drawPoint(point, 2.5, "rgba(200, 200, 200)");
            }
        }, 1000 / fps);
    </script>
</body>

</html>